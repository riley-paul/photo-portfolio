---
import { getCollection } from "astro:content";
const blogs = await getCollection("blog");

import { Image } from "astro:assets";
import RootLayout from "@/layouts/root-layout.astro";
import { formatDate } from "@/lib/utils";
import MarkdownLayout from "@/layouts/markdown-layout.astro";
---

<RootLayout title="Blog">
  <MarkdownLayout>
    <h2>Blog</h2>
  </MarkdownLayout>

  <div class="flex flex-col divide-y divide-base-300 w-full">
    {
      blogs
        .filter((blog) => !blog.data.draft)
        .map((blog) => (
          <div class="py-2">
            <a href={`/blog/${blog.slug}`} class="flex gap-2">
              <Image height={80} src={blog.data.cover} alt="cover photo" />
              <div class="flex flex-col">
                <h3 class="font-bold">{blog.data.title}</h3>
                <p class="text-sm opacity-50">{formatDate(blog.data.date)}</p>
              </div>
            </a>
          </div>
        ))
    }
  </div>
</RootLayout>
